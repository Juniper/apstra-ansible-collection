---
- name: Test create/delete blueprint
  hosts: localhost
  gather_facts: false
  connection: local
  tasks:
    - name: Connect to Apstra
      junipernetworks.apstra.authenticate:
        logout: false
      register: auth_response

    - name: Create blueprint
      junipernetworks.apstra.blueprint:
        auth_token: "{{ auth_response.auth_token }}"
        lock: true
      register: apstra_facts

    - name: Delete blueprint
      ansible.builtin.debug:
        var: apstra_facts

    - name: Logout of Apstra
      junipernetworks.apstra.authenticate:
        logout: true
